# Scrip para realizar la configuración previa del servidor.
#
$nameServer="X"
$addressIP="XXX.XXX.XXX.XXX"
$networkInternal="Ethernet X"
Rename-Computer -NewName $nameServer
Get-NetAdapter –name $networkInternal | Remove-NetIPAddress -Confirm:$false
Get-NetAdapter –name $networkInternal | New-NetIPAddress –addressfamily IPv4 –ipaddress $addressIP –prefixlength 24 –type unicast
Restart-Computer -force
#
# Explicación del funcionamineto del script
#
# $nameServer="X" introduce el nombre del servidor.
# $addressIP="XXX.XXX.XXX.XXX" introduce la ip del servidor.
# $networkInternal="Ethernet X" introduce el adaptador interno del servidor.
# Rename-Computer -NewName $nameServer  cambia el nombre del servidor al introducido anteriormente.
# Get-NetAdapter –name $networkInternal | Remove-NetIPAddress -Confirm:$false y Get-NetAdapter –name $networkInternal | New-NetIPAddress –addressfamily IPv4 –ipaddress $addressIP –prefixlength 24 –type unicast  cambian la dirección ip de la red interna.
# Restart-Computer -force  reinicia el equipo para que se apliquen los cambios.
#
Get-Windowsfeature
# Lista las caracteristicas del sistema.
#
Install-WindowsFeature -name AD-Domain-Services,DNS -IncludeManagementTools
# Instala el DNS y el AD Domain Services.
#
# Scrip para la implementación de AD DS
#
$dominioFQDN = "X"
$dominioNETBIOS = "X"
$adminPass = "X"
Import-Module ADDSDeployment
Install-ADDSForest `
-CreateDnsDelegation:$False `
-DatabasePath "C:\Windows\NTDS" `
-DomainMode "Win2016" `
-DomainName $dominioFQDN `
-DomainNetbiosName $dominioNETBIOS `
-SafeModeAdministratorPassword (ConvertTo-SecureString -string $adminPass -AsPlainText -Force)
-ForestMode "Win2016" `
-InstallDns:$True `
-LogPath "C:\Windows\NTDS" `
-NoRebootOnCompletion:$False `
-SysvolPath "C:\Windows\SYSVOL" `
-Force:$true 
#
# Explicación del funcionamiento del script
#
# Import-Module ADDSDeployment  
